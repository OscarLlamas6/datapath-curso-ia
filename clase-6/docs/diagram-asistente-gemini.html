<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente de Voz con Gemini AI - Flujo Completo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #4facfe;
            margin-bottom: 20px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        
        .flow-diagram {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .flow-step {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 25px;
            position: relative;
            transition: all 0.3s ease;
            border-left: 5px solid #4facfe;
        }
        
        .flow-step:hover {
            transform: translateX(10px);
            box-shadow: 0 10px 30px rgba(79, 172, 254, 0.3);
        }
        
        .flow-step.gemini-step {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-left-color: #ff6b6b;
        }
        
        .step-number {
            position: absolute;
            left: -15px;
            top: 20px;
            background: #4facfe;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }
        
        .gemini-step .step-number {
            background: #ff6b6b;
        }
        
        .step-title {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 10px;
            padding-left: 35px;
            font-weight: bold;
        }
        
        .step-description {
            color: #555;
            line-height: 1.6;
            padding-left: 35px;
        }
        
        .code-snippet {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
        }
        
        .arrow {
            text-align: center;
            color: #4facfe;
            font-size: 2em;
            margin: 10px 0;
        }
        
        .arrow.branch {
            display: flex;
            justify-content: center;
            gap: 50px;
            align-items: center;
        }
        
        .component-box {
            display: inline-block;
            background: #4facfe;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9em;
        }
        
        .component-box.gemini {
            background: #ff6b6b;
        }
        
        .highlight {
            background: #ffeaa7;
            padding: 2px 5px;
            border-radius: 3px;
            font-weight: bold;
        }
        
        .legend {
            background: #f0f0f0;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }
        
        .legend-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .legend-icon {
            width: 30px;
            height: 30px;
            margin-right: 15px;
            font-size: 1.5em;
        }
        
        .tech-specs {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
        }
        
        .tech-specs-title {
            font-weight: bold;
            color: #1976d2;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– Asistente de Voz con Gemini AI</h1>
        <div class="subtitle">Flujo Completo: Speech-to-Text + AnÃ¡lisis de Sentimiento + Feedback BilingÃ¼e + Gemini AI</div>
        
        <div class="flow-diagram">
            <div class="flow-step">
                <div class="step-number">1</div>
                <div class="step-title">ğŸ”§ InicializaciÃ³n del Sistema</div>
                <div class="step-description">
                    Se cargan las credenciales y se inicializan dos clientes principales: Speech API y Gemini AI.
                    <div class="code-snippet">
# Variables de entorno<br>
PROJECT_ID, RECOGNIZER_ID, LOCATION<br>
GOOGLE_APPLICATION_CREDENTIALS = "./vertexai.json"<br>
<br>
# Cliente Gemini AI<br>
genai_client = genai.Client(<br>
&nbsp;&nbsp;vertexai=True,<br>
&nbsp;&nbsp;project=PROJECT_ID,<br>
&nbsp;&nbsp;location=LOCATION<br>
)<br>
<br>
# ParÃ¡metros de audio<br>
RATE = 8000 Hz (telephony)<br>
CHANNELS = 1 (mono)<br>
audio_q = Queue()
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="component-box">ğŸ“ .env</span>
                        <span class="component-box">ğŸ”‘ Vertex AI Credentials</span>
                        <span class="component-box gemini">ğŸ¤– Gemini Client</span>
                        <span class="component-box">â˜ï¸ Speech Client</span>
                    </div>
                    <div class="tech-specs">
                        <div class="tech-specs-title">ğŸ“Š Especificaciones TÃ©cnicas:</div>
                        â€¢ <strong>Modelo Gemini:</strong> gemini-2.5-flash (Ãºltima generaciÃ³n)<br>
                        â€¢ <strong>Vertex AI:</strong> IntegraciÃ³n nativa con Google Cloud<br>
                        â€¢ <strong>Audio:</strong> 8kHz mono, formato LINEAR16
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <div class="flow-step">
                <div class="step-number">2</div>
                <div class="step-title">ğŸ¤ Captura de Audio en Tiempo Real</div>
                <div class="step-description">
                    El micrÃ³fono captura audio continuamente mediante un callback asÃ­ncrono.
                    <div class="code-snippet">
sd.InputStream(<br>
&nbsp;&nbsp;samplerate=8000,<br>
&nbsp;&nbsp;channels=1,<br>
&nbsp;&nbsp;dtype="int16",<br>
&nbsp;&nbsp;callback=audio_callback<br>
)<br>
<br>
def audio_callback(indata, frames, time, status):<br>
&nbsp;&nbsp;audio_q.put(bytes(indata))  # Thread-safe
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="component-box">ğŸ™ï¸ sounddevice</span>
                        <span class="component-box">ğŸ“¦ Chunks de 800 muestras</span>
                        <span class="component-box">â±ï¸ Cada 100ms</span>
                    </div>
                    <div class="tech-specs">
                        <div class="tech-specs-title">ğŸ” Detalles TÃ©cnicos:</div>
                        â€¢ <strong>Callback asÃ­ncrono:</strong> Se ejecuta en un thread separado<br>
                        â€¢ <strong>Buffer size:</strong> RATE/10 = 800 muestras por chunk<br>
                        â€¢ <strong>Latencia:</strong> ~100ms por chunk
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <div class="flow-step">
                <div class="step-number">3</div>
                <div class="step-title">ğŸ“¡ Streaming a Google Cloud Speech V2</div>
                <div class="step-description">
                    Los chunks de audio se envÃ­an mediante un generador Python a la API de Speech.
                    <div class="code-snippet">
def request_generator():<br>
&nbsp;&nbsp;# 1er mensaje: ConfiguraciÃ³n<br>
&nbsp;&nbsp;yield StreamingRecognizeRequest(<br>
&nbsp;&nbsp;&nbsp;&nbsp;recognizer=recognizer,<br>
&nbsp;&nbsp;&nbsp;&nbsp;streaming_config=streaming_config<br>
&nbsp;&nbsp;)<br>
&nbsp;&nbsp;# Mensajes subsecuentes: Audio<br>
&nbsp;&nbsp;while True:<br>
&nbsp;&nbsp;&nbsp;&nbsp;data = audio_q.get()<br>
&nbsp;&nbsp;&nbsp;&nbsp;yield StreamingRecognizeRequest(audio=data)<br>
<br>
responses = client.streaming_recognize(<br>
&nbsp;&nbsp;requests=request_generator()<br>
)
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="component-box">ğŸŒ Speech API V2</span>
                        <span class="component-box">ğŸ“ Modelo Telephony</span>
                        <span class="component-box">ğŸ‡ºğŸ‡¸ es-US</span>
                    </div>
                    <div class="tech-specs">
                        <div class="tech-specs-title">âš™ï¸ ConfiguraciÃ³n:</div>
                        â€¢ <strong>Recognizer:</strong> projects/{PROJECT_ID}/locations/{LOCATION}/recognizers/{RECOGNIZER_ID}<br>
                        â€¢ <strong>Encoding:</strong> LINEAR16 (PCM sin comprimir)<br>
                        â€¢ <strong>Language:</strong> es-US (EspaÃ±ol Estados Unidos)<br>
                        â€¢ <strong>Modelo:</strong> telephony (optimizado para voz telefÃ³nica)
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <div class="flow-step">
                <div class="step-number">4</div>
                <div class="step-title">ğŸ“ Procesamiento de Transcripciones</div>
                <div class="step-description">
                    La API retorna transcripciones parciales y finales en tiempo real.
                    <div class="code-snippet">
for response in responses:<br>
&nbsp;&nbsp;for result in response.results:<br>
&nbsp;&nbsp;&nbsp;&nbsp;if result.alternatives:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text = result.alternatives[0].transcript<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f"ğŸ—£ï¸ {text}")  # Parcial<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if result.is_final:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(f"âœ… Usuario: {text}")  # Final<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# AquÃ­ se procesa el texto final
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="component-box">ğŸ”„ Streaming bidireccional</span>
                        <span class="component-box">âš¡ Baja latencia</span>
                        <span class="component-box">âœ… is_final flag</span>
                    </div>
                    <div class="tech-specs">
                        <div class="tech-specs-title">ğŸ“Š Tipos de resultados:</div>
                        â€¢ <strong>Parciales:</strong> Transcripciones intermedias que se actualizan<br>
                        â€¢ <strong>Finales (is_final=True):</strong> TranscripciÃ³n definitiva de la frase<br>
                        â€¢ <strong>Alternatives:</strong> MÃºltiples opciones ordenadas por confianza
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <div class="flow-step gemini-step">
                <div class="step-number">5</div>
                <div class="step-title">ğŸ” AnÃ¡lisis de Sentimiento con Gemini</div>
                <div class="step-description">
                    Cada transcripciÃ³n final se analiza para detectar el sentimiento: positivo, negativo o neutral.
                    <div class="code-snippet">
def analizar_sentimiento(texto: str) -> str:<br>
&nbsp;&nbsp;"""Analiza el sentimiento usando Gemini AI"""<br>
&nbsp;&nbsp;prompt = """Analiza el sentimiento del siguiente texto<br>
&nbsp;&nbsp;y responde SOLO con una palabra: 'positivo',<br>
&nbsp;&nbsp;'negativo' o 'neutral'."""<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;response = genai_client.models.generate_content(<br>
&nbsp;&nbsp;&nbsp;&nbsp;model="gemini-2.5-flash",<br>
&nbsp;&nbsp;&nbsp;&nbsp;contents=prompt<br>
&nbsp;&nbsp;)<br>
&nbsp;&nbsp;return response.text.strip().lower()
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="component-box gemini">ğŸ§  NLP Avanzado</span>
                        <span class="component-box gemini">ğŸ˜Š Positivo</span>
                        <span class="component-box gemini">ğŸ˜Ÿ Negativo</span>
                        <span class="component-box gemini">ğŸ˜ Neutral</span>
                    </div>
                    <div class="tech-specs">
                        <div class="tech-specs-title">ğŸ¯ ClasificaciÃ³n de Sentimientos:</div>
                        â€¢ <strong>Positivo:</strong> Comentarios felices, agradecimientos, satisfacciÃ³n<br>
                        â€¢ <strong>Negativo:</strong> Quejas, frustraciÃ³n, insatisfacciÃ³n<br>
                        â€¢ <strong>Neutral:</strong> Preguntas, informaciÃ³n, conversaciÃ³n casual<br>
                        â€¢ <strong>Prompt Engineering:</strong> Instrucciones especÃ­ficas para respuestas consistentes
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <div class="flow-step" style="background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%); border-left-color: #28a745;">
                <div class="step-number" style="background: #28a745;">6</div>
                <div class="step-title">âœ¨ Sistema de Feedback Positivo BilingÃ¼e</div>
                <div class="step-description">
                    Si el sentimiento es POSITIVO, se activa el sistema de registro de feedback bilingÃ¼e.
                    <div class="code-snippet">
if sentimiento == 'positivo':<br>
&nbsp;&nbsp;procesar_feedback_positivo(text)<br>
<br>
def procesar_feedback_positivo(texto: str):<br>
&nbsp;&nbsp;global feedback_positivo_count<br>
&nbsp;&nbsp;feedback_positivo_count += 1<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;print("âœ¨ Â¡FEEDBACK POSITIVO DETECTADO! âœ¨")<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;# Mostrar en espaÃ±ol (original)<br>
&nbsp;&nbsp;print(f"ğŸ“ EspaÃ±ol: {texto}")<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;# Traducir al inglÃ©s con Gemini<br>
&nbsp;&nbsp;traduccion = traducir_a_ingles(texto)<br>
&nbsp;&nbsp;print(f"ğŸŒ English: {traduccion}")<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;print(f"ğŸ“Š Total feedbacks: {feedback_positivo_count}")
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="component-box" style="background: #28a745;">ğŸ“ EspaÃ±ol Original</span>
                        <span class="component-box" style="background: #28a745;">ğŸ”„ TraducciÃ³n AutomÃ¡tica</span>
                        <span class="component-box" style="background: #28a745;">ğŸŒ English Output</span>
                        <span class="component-box" style="background: #28a745;">ğŸ“Š Contador</span>
                    </div>
                    <div class="tech-specs">
                        <div class="tech-specs-title">ğŸŒ TraducciÃ³n BilingÃ¼e:</div>
                        â€¢ <strong>DetecciÃ³n automÃ¡tica:</strong> Solo se activa con sentimiento positivo<br>
                        â€¢ <strong>Gemini Translator:</strong> Traduce espaÃ±ol â†’ inglÃ©s usando IA<br>
                        â€¢ <strong>Display dual:</strong> Muestra ambos idiomas en consola<br>
                        â€¢ <strong>Contador persistente:</strong> Registra total de feedbacks positivos<br>
                        â€¢ <strong>Uso prÃ¡ctico:</strong> Sistema de registro de satisfacciÃ³n del cliente
                    </div>
                    <div class="tech-specs" style="background: #e8f5e9; border-left-color: #28a745; margin-top: 15px;">
                        <div class="tech-specs-title">ğŸ’¡ Ejemplo de Output:</div>
                        <code style="display: block; background: #fff; padding: 10px; border-radius: 5px; margin-top: 8px;">
ğŸ—£ï¸ Estoy muy contento con este asistente<br>
âœ… Usuario: Estoy muy contento con este asistente<br>
ğŸ” Analizando sentimiento...<br>
ğŸ˜Š Sentimiento detectado: POSITIVO<br>
<br>
============================================================<br>
âœ¨ Â¡FEEDBACK POSITIVO DETECTADO! âœ¨<br>
============================================================<br>
ğŸ“ EspaÃ±ol: Estoy muy contento con este asistente<br>
ğŸ”„ Traduciendo al inglÃ©s...<br>
ğŸŒ English: I am very happy with this assistant<br>
<br>
ğŸ“Š Total de feedbacks positivos registrados: 1<br>
============================================================
                        </code>
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <div class="flow-step gemini-step">
                <div class="step-number">7</div>
                <div class="step-title">ğŸ¤– Consulta a Gemini AI</div>
                <div class="step-description">
                    Cuando se recibe una transcripciÃ³n final, se envÃ­a a Gemini para generar una respuesta.
                    <div class="code-snippet">
def responder_con_gemini(texto_usuario: str):<br>
&nbsp;&nbsp;print("ğŸ¤– Escribiendo...")<br>
&nbsp;&nbsp;response = genai_client.models.generate_content(<br>
&nbsp;&nbsp;&nbsp;&nbsp;model="gemini-2.5-flash",<br>
&nbsp;&nbsp;&nbsp;&nbsp;contents="Responda de forma breve y concisa, "<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"no mÃ¡s de 100 caracteres: " + texto_usuario<br>
&nbsp;&nbsp;)<br>
&nbsp;&nbsp;if response and response.text:<br>
&nbsp;&nbsp;&nbsp;&nbsp;print(f"ğŸ§© Gemini: {response.text}")
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="component-box gemini">ğŸ¤– Gemini 2.5 Flash</span>
                        <span class="component-box gemini">âš¡ Respuesta rÃ¡pida</span>
                        <span class="component-box gemini">ğŸ’¬ MÃ¡x 100 chars</span>
                    </div>
                    <div class="tech-specs">
                        <div class="tech-specs-title">ğŸ§  CaracterÃ­sticas de Gemini:</div>
                        â€¢ <strong>Modelo:</strong> gemini-2.5-flash (optimizado para velocidad)<br>
                        â€¢ <strong>API:</strong> Google GenAI SDK con Vertex AI<br>
                        â€¢ <strong>Prompt engineering:</strong> Respuestas concisas limitadas a 100 caracteres<br>
                        â€¢ <strong>Latencia:</strong> ~1-2 segundos por respuesta
                    </div>
                </div>
            </div>
            
            <div class="arrow">â¬‡ï¸</div>
            
            <div class="flow-step">
                <div class="step-number">8</div>
                <div class="step-title">ğŸ’¬ Respuesta en Texto</div>
                <div class="step-description">
                    La respuesta de Gemini se muestra en la consola (en este script solo texto, sin TTS).
                    <div class="code-snippet">
# Output en consola<br>
ğŸ—£ï¸ [TranscripciÃ³n parcial...]<br>
âœ… Usuario: Â¿CuÃ¡l es la capital de Francia?<br>
ğŸ¤– Escribiendo...<br>
ğŸ§© Gemini: ParÃ­s es la capital de Francia.
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="component-box">ğŸ“º Output: Consola</span>
                        <span class="component-box">ğŸ“ Solo texto</span>
                    </div>
                    <div class="tech-specs">
                        <div class="tech-specs-title">ğŸ’¡ Nota:</div>
                        Este script NO incluye Text-to-Speech. La respuesta de Gemini solo se muestra como texto en la terminal.
                    </div>
                </div>
            </div>
            
            <div class="arrow">ğŸ”„</div>
            
            <div class="flow-step" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); border-left-color: #00d2ff;">
                <div class="step-number" style="background: #00d2ff;">âˆ</div>
                <div class="step-title">ğŸ” Ciclo Conversacional Continuo</div>
                <div class="step-description">
                    El asistente permanece activo escuchando y respondiendo hasta que se cumple una condiciÃ³n de salida.
                    <div class="code-snippet">
# Dentro del loop de transcripciÃ³n<br>
if result.is_final:<br>
&nbsp;&nbsp;if "salir" in text.lower():<br>
&nbsp;&nbsp;&nbsp;&nbsp;print("ğŸ‘‹ Fin del asistente por comando de voz")<br>
&nbsp;&nbsp;&nbsp;&nbsp;print(f"ğŸ“Š Resumen: {feedback_positivo_count} feedbacks")<br>
&nbsp;&nbsp;&nbsp;&nbsp;return  # Termina el programa<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;# Analizar sentimiento<br>
&nbsp;&nbsp;sentimiento = analizar_sentimiento(text)<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;# Si es positivo, registrar feedback bilingÃ¼e<br>
&nbsp;&nbsp;if sentimiento == 'positivo':<br>
&nbsp;&nbsp;&nbsp;&nbsp;procesar_feedback_positivo(text)<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;# Responder con Gemini<br>
&nbsp;&nbsp;responder_con_gemini(text)
                    </div>
                    <div style="margin-top: 15px;">
                        <strong>Condiciones de terminaciÃ³n:</strong>
                        <ul style="margin-top: 10px; padding-left: 50px;">
                            <li>ğŸ—£ï¸ El usuario dice <span class="highlight">"salir"</span></li>
                            <li>âŒ¨ï¸ Se presiona <span class="highlight">Ctrl+C</span> (KeyboardInterrupt)</li>
                            <li>âŒ Ocurre un error en el streaming o API</li>
                        </ul>
                    </div>
                    <div class="tech-specs">
                        <div class="tech-specs-title">ğŸ”„ Flujo del ciclo mejorado:</div>
                        1. Escucha continua del micrÃ³fono<br>
                        2. TranscripciÃ³n en tiempo real<br>
                        3. Al detectar frase final â†’ <strong>Analizar sentimiento</strong><br>
                        4. Si positivo â†’ <strong>Registrar feedback bilingÃ¼e</strong><br>
                        5. Consultar Gemini para respuesta<br>
                        6. Muestra respuesta â†’ Vuelve a escuchar<br>
                        7. Repite hasta comando de salida<br>
                        8. Al salir â†’ Muestra resumen de feedbacks
                    </div>
                </div>
            </div>
        </div>
        
        <div class="legend">
            <div class="legend-title">ğŸ“š TecnologÃ­as y Componentes</div>
            <div class="legend-item">
                <div class="legend-icon">ğŸ¤</div>
                <div><strong>sounddevice:</strong> Biblioteca Python para captura de audio en tiempo real desde el micrÃ³fono</div>
            </div>
            <div class="legend-item">
                <div class="legend-icon">ğŸ“¦</div>
                <div><strong>queue.Queue:</strong> Cola thread-safe para comunicaciÃ³n entre el callback de audio y el generador</div>
            </div>
            <div class="legend-item">
                <div class="legend-icon">â˜ï¸</div>
                <div><strong>Google Cloud Speech V2:</strong> API de transcripciÃ³n de voz a texto con soporte para streaming</div>
            </div>
            <div class="legend-item">
                <div class="legend-icon">ğŸ¤–</div>
                <div><strong>Google Gemini AI:</strong> Modelo de lenguaje multimodal de Ãºltima generaciÃ³n (gemini-2.5-flash)</div>
            </div>
            <div class="legend-item">
                <div class="legend-icon">ğŸ”„</div>
                <div><strong>Generator Pattern:</strong> PatrÃ³n de diseÃ±o Python para streaming de datos sin bloquear el programa</div>
            </div>
            <div class="legend-item">
                <div class="legend-icon">ğŸ”‘</div>
                <div><strong>Vertex AI:</strong> Plataforma de Google Cloud para ML/AI con autenticaciÃ³n mediante service account</div>
            </div>
            <div class="legend-item">
                <div class="legend-icon">âœ…</div>
                <div><strong>is_final:</strong> Flag que indica cuando Speech API ha completado la transcripciÃ³n de una frase</div>
            </div>
            <div class="legend-item">
                <div class="legend-icon">ğŸ”</div>
                <div><strong>AnÃ¡lisis de Sentimiento:</strong> TÃ©cnica de NLP para clasificar emociones en texto (positivo/negativo/neutral)</div>
            </div>
            <div class="legend-item">
                <div class="legend-icon">ğŸŒ</div>
                <div><strong>TraducciÃ³n AutomÃ¡tica:</strong> Gemini traduce espaÃ±ol â†’ inglÃ©s para registro bilingÃ¼e de feedbacks</div>
            </div>
            <div class="legend-item">
                <div class="legend-icon">ğŸ“Š</div>
                <div><strong>Contador de Feedbacks:</strong> Variable global que registra el total de comentarios positivos en la sesiÃ³n</div>
            </div>
        </div>
        
        <div class="legend" style="margin-top: 20px; background: #fff3cd; border: 2px solid #ffc107;">
            <div class="legend-title" style="color: #856404;">âš ï¸ Diferencias con main.py</div>
            <div style="color: #856404; line-height: 1.8;">
                <strong>main.py:</strong> Solo transcripciÃ³n (Speech-to-Text)<br>
                <strong>asistente-gemini.py:</strong> TranscripciÃ³n + AnÃ¡lisis de Sentimiento + Feedback BilingÃ¼e + Gemini AI<br>
                <br>
                <strong>Ventajas:</strong><br>
                â€¢ Asistente conversacional completo con IA<br>
                â€¢ DetecciÃ³n automÃ¡tica de sentimientos (NLP avanzado)<br>
                â€¢ Sistema de registro de feedbacks positivos bilingÃ¼e (ES/EN)<br>
                â€¢ Contador de satisfacciÃ³n del cliente<br>
                â€¢ TraducciÃ³n automÃ¡tica con Gemini AI
            </div>
        </div>
        
        <div class="legend" style="margin-top: 20px; background: #e8f5e9; border: 2px solid #28a745;">
            <div class="legend-title" style="color: #2e7d32;">ğŸ“ Conceptos Educativos Implementados</div>
            <div style="color: #2e7d32; line-height: 1.8;">
                <strong>1. AnÃ¡lisis de Sentimiento (Sentiment Analysis):</strong><br>
                &nbsp;&nbsp;&nbsp;â€¢ TÃ©cnica de NLP para clasificar emociones en texto<br>
                &nbsp;&nbsp;&nbsp;â€¢ Usa Gemini AI como clasificador<br>
                &nbsp;&nbsp;&nbsp;â€¢ AplicaciÃ³n: Chatbots, atenciÃ³n al cliente, redes sociales<br>
                <br>
                <strong>2. Prompt Engineering:</strong><br>
                &nbsp;&nbsp;&nbsp;â€¢ Instrucciones especÃ­ficas para obtener respuestas consistentes<br>
                &nbsp;&nbsp;&nbsp;â€¢ ValidaciÃ³n de respuestas esperadas<br>
                &nbsp;&nbsp;&nbsp;â€¢ TÃ©cnica fundamental en IA generativa<br>
                <br>
                <strong>3. TraducciÃ³n AutomÃ¡tica Neural:</strong><br>
                &nbsp;&nbsp;&nbsp;â€¢ Gemini como motor de traducciÃ³n multilingÃ¼e<br>
                &nbsp;&nbsp;&nbsp;â€¢ Procesamiento contextual (no solo palabra por palabra)<br>
                &nbsp;&nbsp;&nbsp;â€¢ AplicaciÃ³n: InternacionalizaciÃ³n de aplicaciones<br>
                <br>
                <strong>4. Sistema de Feedback BilingÃ¼e:</strong><br>
                &nbsp;&nbsp;&nbsp;â€¢ Registro automÃ¡tico de comentarios positivos<br>
                &nbsp;&nbsp;&nbsp;â€¢ Output en mÃºltiples idiomas para anÃ¡lisis global<br>
                &nbsp;&nbsp;&nbsp;â€¢ AplicaciÃ³n: MÃ©tricas de satisfacciÃ³n del cliente
            </div>
        </div>
    </div>
</body>
</html>
